<UserControl x:Class="WpfApp3.Views.Dashboard.DashboardView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:WpfApp3.ViewModels.Dashboard"
             xmlns:lvc="clr-namespace:LiveCharts.Wpf;assembly=LiveCharts.Wpf"
             Background="#F3F5F9">

    <UserControl.DataContext>
        <vm:DashboardViewModel/>
    </UserControl.DataContext>

    <Grid Margin="8">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- KPI tiles row -->
        <UniformGrid Grid.Row="0" Columns="3" Margin="0,0,0,18">

            <!-- Tile 1 -->
            <Border CornerRadius="18" Background="White" Margin="8" Padding="18">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="18" ShadowDepth="2" Opacity="0.10"/>
                </Border.Effect>

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Border Width="54" Height="54" CornerRadius="27" Background="#E7FAF6" VerticalAlignment="Center">
                        <TextBlock Text="₱"
                                   FontSize="20"
                                   FontWeight="Bold"
                                   VerticalAlignment="Center"
                                   HorizontalAlignment="Center"/>
                    </Border>

                    <StackPanel Grid.Column="1" Margin="14,0,0,0" VerticalAlignment="Center">
                        <TextBlock Text="Total Allotment Amount" Foreground="#8A94A6" FontSize="12"/>
                        <TextBlock Text="{Binding TotalAllotmentAmount}"
                                   Foreground="#2E3A59"
                                   FontSize="20"
                                   FontWeight="SemiBold"
                                   Margin="0,4,0,0"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Tile 2 -->
            <Border CornerRadius="18" Background="White" Margin="8" Padding="18">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="18" ShadowDepth="2" Opacity="0.10"/>
                </Border.Effect>

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Border Width="54" Height="54" CornerRadius="27" Background="#EEF2FF" VerticalAlignment="Center">
                        <TextBlock Text="👥"
                                   FontSize="18"
                                   VerticalAlignment="Center"
                                   HorizontalAlignment="Center"/>
                    </Border>

                    <StackPanel Grid.Column="1" Margin="14,0,0,0" VerticalAlignment="Center">
                        <TextBlock Text="Number of Beneficiaries" Foreground="#8A94A6" FontSize="12"/>
                        <TextBlock Text="{Binding BeneficiariesCount}"
                                   Foreground="#2E3A59"
                                   FontSize="20"
                                   FontWeight="SemiBold"
                                   Margin="0,4,0,0"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Tile 3 -->
            <Border CornerRadius="18" Background="White" Margin="8" Padding="18">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="18" ShadowDepth="2" Opacity="0.10"/>
                </Border.Effect>

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Border Width="54" Height="54" CornerRadius="27" Background="#FFF3E6" VerticalAlignment="Center">
                        <TextBlock Text="🛠"
                                   FontSize="18"
                                   VerticalAlignment="Center"
                                   HorizontalAlignment="Center"/>
                    </Border>

                    <StackPanel Grid.Column="1" Margin="14,0,0,0" VerticalAlignment="Center">
                        <TextBlock Text="Number of Projects" Foreground="#8A94A6" FontSize="12"/>
                        <TextBlock Text="{Binding ProjectsCount}"
                                   Foreground="#2E3A59"
                                   FontSize="20"
                                   FontWeight="SemiBold"
                                   Margin="0,4,0,0"/>
                    </StackPanel>
                </Grid>
            </Border>

        </UniformGrid>

        <!-- Charts area -->
        <Grid Grid.Row="1" Margin="8">
            <Grid.RowDefinitions>
                <RowDefinition Height="300"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="420"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Pie: Beneficiaries Statistics -->
            <Border Grid.Row="0" Grid.Column="0" CornerRadius="18" Background="White" Padding="18" Margin="0,0,14,14">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="18" ShadowDepth="2" Opacity="0.08"/>
                </Border.Effect>

                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <TextBlock Text="Beneficiaries Statistics"
                               FontSize="16"
                               FontWeight="SemiBold"
                               Foreground="#2E3A59"/>

                    <lvc:PieChart Grid.Row="1"
                                  Series="{Binding BeneficiariesPieSeries}"
                                  DataTooltip="{x:Null}"
                                  LegendLocation="Right">
                    </lvc:PieChart>
                </Grid>
            </Border>

            <!-- Line: Yearly Total Allotment -->
            <Border Grid.Row="0" Grid.Column="1" CornerRadius="18" Background="White" Padding="18" Margin="0,0,0,14">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="18" ShadowDepth="2" Opacity="0.08"/>
                </Border.Effect>

                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <TextBlock Text="Yearly Total Allotment"
                               FontSize="16"
                               FontWeight="SemiBold"
                               Foreground="#2E3A59"/>

                    <lvc:CartesianChart Grid.Row="1"
                                        Series="{Binding YearlyAllotmentSeries}"
                                        LegendLocation="None">
                        <lvc:CartesianChart.AxisX>
                            <lvc:Axis Labels="{Binding YearlyLabels}"/>
                        </lvc:CartesianChart.AxisX>
                        <lvc:CartesianChart.AxisY>
                            <lvc:Axis LabelFormatter="{Binding MoneyFormatter}"/>
                        </lvc:CartesianChart.AxisY>
                    </lvc:CartesianChart>
                </Grid>
            </Border>

            <!-- Area: Project History -->
            <Border Grid.Row="1" Grid.ColumnSpan="2" CornerRadius="18" Background="White" Padding="18">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="18" ShadowDepth="2" Opacity="0.08"/>
                </Border.Effect>

                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <TextBlock Text="Project History"
                               FontSize="16"
                               FontWeight="SemiBold"
                               Foreground="#2E3A59"/>

                    <lvc:CartesianChart Grid.Row="1"
                                        Series="{Binding ProjectHistorySeries}"
                                        LegendLocation="None">
                        <lvc:CartesianChart.AxisX>
                            <lvc:Axis Labels="{Binding MonthLabels}"/>
                        </lvc:CartesianChart.AxisX>
                        <lvc:CartesianChart.AxisY>
                            <lvc:Axis LabelFormatter="{Binding CountFormatter}"/>
                        </lvc:CartesianChart.AxisY>
                    </lvc:CartesianChart>
                </Grid>
            </Border>
        </Grid>

    </Grid>
</UserControl>
